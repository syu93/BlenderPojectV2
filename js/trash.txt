	function onDocumentMouseUp( event ) {
		event.preventDefault();
		
		if ( intersects.length > 0 ) {
			controls.enabled = true;
			if(INTERSECTED)
			{
				//Old object
				INTERSECTED=SELECTED;
				INTERSECTED.material.color.setHex("0x"+SELECTED.oldMaterial);
				INTERSECTED.material.opacity=1;
				INTERSECTED.material.blending=THREE.NoBlending;
				
				// INTERSECTED.children[0].visible=false;
			}
			else 
			{
				//Old object
				INTERSECTED = intersects[ 0 ].object;
				// controls_object.detach(INTERSECTED);
			}
			//Current object
			SELECTED = intersects[ 0 ].object;
			SELECTED.oldMaterial = SELECTED.material.color.getHex().toString(16);
			// controls_object.attach( SELECTED );
			selected_object(SELECTED, controls_object);
		
			if(SELECTED.id != INTERSECTED.id)
			{
			console.log("-------------------");
			console.log("Old selected object : "+INTERSECTED.id);
			console.log("Current selected object : "+SELECTED.id);
			console.log("-------------------");
			}
		}
		else{
			if(SELECTED){
				// controls_object.detach(SELECTED);
				SELECTED.material.color.setHex("0x"+SELECTED.oldMaterial);
				SELECTED.material.opacity=1;
				SELECTED.material.blending=THREE.NoBlending;
				
				// SELECTED.children[0].visible=false;
			}
		}
		
	}